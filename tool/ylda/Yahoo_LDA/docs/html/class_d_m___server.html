<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Y!LDA: DM_Server Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>DM_Server Class Reference</h1><!-- doxytag: class="DM_Server" --><!-- doxytag: inherits="GlobalTable::DistributedMap" -->
<p>The Server class that implements the DistributedMap Ice interface.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_d_m___server_8h_source.html">DM_Server.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for DM_Server:</div>
<div class="dynsection">
 <div class="center">
  <img src="class_d_m___server.png" usemap="#DM_Server_map" alt=""/>
  <map id="DM_Server_map" name="DM_Server_map">
</map>
 </div>
</div>

<p><a href="class_d_m___server-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m___server.html#a1cd634944614b427c01095814f91e8e4">DM_Server</a> (int num_clients, <a class="el" href="class_server___helper.html">Server_Helper</a> &amp;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m___server.html#a5ca03ed605fe2eeabfc0e86b8d9348e5">~DM_Server</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m___server.html#a2ef825954e6bfea85484800642f93136">put</a> (const string &amp;key, const string &amp;val, const Ice::Current &amp;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m___server.html#af56ffe1e8d40e23d30f4bf1a93b1a6c8">set</a> (const string &amp;key, const string &amp;val, const Ice::Current &amp;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m___server.html#ae440379cb66a3725c1fd7666e6287fa1">get</a> (const string &amp;key, string &amp;val, const Ice::Current &amp;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m___server.html#af60a2b4c3d5f5bfaceaa09797ecf54f8">remove</a> (const string &amp;, string &amp;, const Ice::Current &amp;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m___server.html#ad90ade02956d09234831cf7edd61fff5">putNget_async</a> (const AMD_DistributedMap_putNgetPtr &amp;png_cb, const string &amp;word, const string &amp;delta, const Ice::Current &amp;)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m___server.html#adedd58e27509b0a4eeebbc08cb5c20d8">waitForAllClients_async</a> (const AMD_DistributedMap_waitForAllClientsPtr &amp;, const Ice::Current &amp;)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Barrier. Helps clients synchronize.  <a href="#adedd58e27509b0a4eeebbc08cb5c20d8"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>The Server class that implements the DistributedMap Ice interface. </p>
<p>It essentially holds a part of the distributed map. Associates a 'key' to a particular 'value'</p>
<p>The implementation abstracts out the semantics. The only accepted key &amp; value types are strings Other types of objects have to be serialized before they can be stored.</p>
<p>It provides the usual get, set &amp; remove operations with the usual semantics.</p>
<p>It also provides accumulator semantics with the put operation. Values stored using a put operation are accumulated instead of being replaced. Note that the semantics of this accumulating is provided by a helper class that implements the <a class="el" href="class_server___helper.html" title="Server Helper interface.">Server_Helper</a> interface</p>
<p>There is also a putNget operation which uses AMD to not block dispatch threads. The putNget is also an AMI. More info on AMI in client class. Please look up Ice documentation for more details. This operation puts a value for the given key and returns the result of the accumulate operation.</p>
<p>It also provides a barrier implementation that lets clients synchronize. This is a very simple use of AMD The dispatch threads are released without busy waiting. Only a counter is incremented with every call. Once the counter reaches num_clients registered, a response is sent to all queued up call back objects. </p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a1cd634944614b427c01095814f91e8e4"></a><!-- doxytag: member="DM_Server::DM_Server" ref="a1cd634944614b427c01095814f91e8e4" args="(int num_clients, Server_Helper &amp;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DM_Server::DM_Server </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num_clients</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_server___helper.html">Server_Helper</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>server_helper</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The num of clients that will be accessing the DistributedMap This parameter is used to provide a barrier </p>

</div>
</div>
<a class="anchor" id="a5ca03ed605fe2eeabfc0e86b8d9348e5"></a><!-- doxytag: member="DM_Server::~DM_Server" ref="a5ca03ed605fe2eeabfc0e86b8d9348e5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DM_Server::~DM_Server </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ae440379cb66a3725c1fd7666e6287fa1"></a><!-- doxytag: member="DM_Server::get" ref="ae440379cb66a3725c1fd7666e6287fa1" args="(const string &amp;key, string &amp;val, const Ice::Current &amp;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool DM_Server::get </td>
          <td>(</td>
          <td class="paramtype">const string &amp;&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string &amp;&nbsp;</td>
          <td class="paramname"> <em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Ice::Current &amp;&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The get operation. Sets val with the value of the key and returns true if the key exists. Else does not set val and returns false </p>

</div>
</div>
<a class="anchor" id="a2ef825954e6bfea85484800642f93136"></a><!-- doxytag: member="DM_Server::put" ref="a2ef825954e6bfea85484800642f93136" args="(const string &amp;key, const string &amp;val, const Ice::Current &amp;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DM_Server::put </td>
          <td>(</td>
          <td class="paramtype">const string &amp;&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&nbsp;</td>
          <td class="paramname"> <em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Ice::Current &amp;&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The put operation. Note the slight difference in semantics This has accumulator semantics. The value is accumulated and not replaced </p>

</div>
</div>
<a class="anchor" id="ad90ade02956d09234831cf7edd61fff5"></a><!-- doxytag: member="DM_Server::putNget_async" ref="ad90ade02956d09234831cf7edd61fff5" args="(const AMD_DistributedMap_putNgetPtr &amp;png_cb, const string &amp;word, const string &amp;delta, const Ice::Current &amp;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DM_Server::putNget_async </td>
          <td>(</td>
          <td class="paramtype">const AMD_DistributedMap_putNgetPtr &amp;&nbsp;</td>
          <td class="paramname"> <em>png_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&nbsp;</td>
          <td class="paramname"> <em>word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&nbsp;</td>
          <td class="paramname"> <em>delta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Ice::Current &amp;&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The put and get operation. Does a put(word,delta) and returns the updated value png_cb is the AMD call back object </p>

</div>
</div>
<a class="anchor" id="af60a2b4c3d5f5bfaceaa09797ecf54f8"></a><!-- doxytag: member="DM_Server::remove" ref="af60a2b4c3d5f5bfaceaa09797ecf54f8" args="(const string &amp;, string &amp;, const Ice::Current &amp;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool DM_Server::remove </td>
          <td>(</td>
          <td class="paramtype">const string &amp;&nbsp;</td>
          <td class="paramname"> <em>word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string &amp;&nbsp;</td>
          <td class="paramname"> <em>counts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Ice::Current &amp;&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The remove operation. Removes the key-value pair from the table If the key does not exist, returns false. Else returns true </p>

</div>
</div>
<a class="anchor" id="af56ffe1e8d40e23d30f4bf1a93b1a6c8"></a><!-- doxytag: member="DM_Server::set" ref="af56ffe1e8d40e23d30f4bf1a93b1a6c8" args="(const string &amp;key, const string &amp;val, const Ice::Current &amp;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DM_Server::set </td>
          <td>(</td>
          <td class="paramtype">const string &amp;&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const string &amp;&nbsp;</td>
          <td class="paramname"> <em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Ice::Current &amp;&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The set operation. The value is replaced if the key already exists </p>

</div>
</div>
<a class="anchor" id="adedd58e27509b0a4eeebbc08cb5c20d8"></a><!-- doxytag: member="DM_Server::waitForAllClients_async" ref="adedd58e27509b0a4eeebbc08cb5c20d8" args="(const AMD_DistributedMap_waitForAllClientsPtr &amp;, const Ice::Current &amp;)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DM_Server::waitForAllClients_async </td>
          <td>(</td>
          <td class="paramtype">const AMD_DistributedMap_waitForAllClientsPtr &amp;&nbsp;</td>
          <td class="paramname"> <em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Ice::Current &amp;&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Barrier. Helps clients synchronize. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/commons/Server/<a class="el" href="_d_m___server_8h_source.html">DM_Server.h</a></li>
<li>src/commons/Server/<a class="el" href="_d_m___server_8cpp.html">DM_Server.cpp</a></li>
</ul>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Tue Jul 19 11:45:26 2011 for Y!LDA by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
